---
title: 实现C语言编译器：三、输入及词法分析
mathjax: true
tags:
  - 编译器
  - 编译原理
  - C
  - Java
categories:
  - 编译原理
abbrlink: 2a32925d
date: 2022-01-18 20:48:04
---

# 三、输入及词法分析

## 输入系统

![20220118211008](https://github.com/CherryYang05/PicGo-image/blob/master/images/20220118211008.png)

输入系统的作用是将源文件从磁盘或内存中读入，根据模块化设计原理，如果输入系统是一个独立模块，通过固定接口与词法解析器交互的话，那么它的修改和维护将会非常灵活。
输入系统的效率，决定着整个编译系统的效率。我们用 C 语言的时候，经常会用到他提供的输入函数例如 scanf 等 C 语言的输入系统设计得不是很合理。当 C 语言的库函数将数据读入程序的过程中，有三次拷贝, 一是从磁盘上将数据拷贝到操作系统中，二是将数据从操作系统拷贝到一个 FILE 结构中，三是将数据从 FILE 结构拷贝到程序的内存中。这些拷贝都需要耗费时间和空间。另外，词法解析器在解析时需要预先读入一些字符(look ahead，在前面的简易编译器中使用过这种技巧), 以便对输入的字符串打上合适的标签(想象前面的 typedef 语句， 一旦读到typedef 那就需要将 typedef 后面的字符读进来才好解析), 预先读入的字符，使用完后，可能需要重新放回到缓冲区中，这一取一放，如果不加以良好的设计，那很可能会产生 I/O 性能上的影响。

